buildscript {

    ext {
        es_version = System.getProperty("es.version", "6.5.4")
    }
    // This isn't applying from repositories.gradle so repeating it here
    repositories {
        mavenCentral()
        maven { 
           name = "internal-snapshots"
            url = "s3://open-es/snapshots"
            authentication {
               awsIm(AwsImAuthentication) // load from EC2 role or env var
            }
        }
        maven {
           name = "internal-releases"
           url = "s3://open-es/releases"
           authentication {
               awsIm(AwsImAuthentication) // load from EC2 role or env var
            }
    }
    } 

    dependencies {
        classpath "org.openes.gradle:build-tools:${es_version}"
    }
}

plugins {
    // Apply the java-library plugin to add support for Java Library
    id 'java-library'
}


allprojects {
    group = "org.openes.plugins"
    version = "${version}"

    apply from: "$rootDir/build-tools/repositories.gradle"
    plugins.withId('java') {
        sourceCompatibility = targetCompatibility = "1.8"
    }
}
test {
    enabled = false
}

